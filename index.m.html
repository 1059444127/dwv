<html>

<head>
<title>DICOM Web Viewer</title>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1" />
<link rel="stylesheet" href="css/style.m.css" />
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<!-- Third party -->  
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
<script type="text/javascript" src="ext/flot/jquery.flot.min.js"></script>
<!-- Local -->
<script type="text/javascript" src="src/dwv.js"></script>
<script type="text/javascript" src="src/application.js"></script>
<script type="text/javascript" src="src/dicom/dicomParser.js"></script>
<script type="text/javascript" src="src/dicom/dictionary.js"></script>
<script type="text/javascript" src="src/html/gui.js"></script>
<script type="text/javascript" src="src/html/html.js"></script>
<script type="text/javascript" src="src/html/style.js"></script>
<script type="text/javascript" src="src/html/layer.js"></script>
<script type="text/javascript" src="src/image/image.js"></script>
<script type="text/javascript" src="src/image/lookupTable.js"></script>
<script type="text/javascript" src="src/image/luts.js"></script>
<script type="text/javascript" src="src/math/shapes.js"></script>
<script type="text/javascript" src="src/math/bucketQueue.js"></script>
<script type="text/javascript" src="src/math/scissors.js"></script>
<script type="text/javascript" src="src/tools/toolbox.js"></script>
<script type="text/javascript" src="src/tools/draw.js"></script>
<script type="text/javascript" src="src/tools/rectangle.js"></script>
<script type="text/javascript" src="src/tools/roi.js"></script>
<script type="text/javascript" src="src/tools/line.js"></script>
<script type="text/javascript" src="src/tools/livewire.js"></script>
<script type="text/javascript" src="src/tools/circle.js"></script>
<script type="text/javascript" src="src/tools/windowLevel.js"></script>
<script type="text/javascript" src="src/tools/zoom.js"></script>
<script type="text/javascript" src="src/tools/filter.js"></script>
<script type="text/javascript" src="src/tools/undo.js"></script>
<script type="text/javascript" src="src/utils/string.js"></script>

<script type="text/javascript">
function toggleInfo()
{
    if( app.getInfoLayer() )
    {
        app.getInfoLayer().display( !app.getInfoLayer().isVisible() );
        // histogram
        var div = document.getElementById("plot");
        if( div.style.display === "none" ) div.style.display = '';
        else div.style.display = "none";
    }
}

function showhome()
{
    // Show only desired NAV Bar
    $('#home').show();
    $('#filter').hide();
    $('#draw').hide();
    // Refresh the NAV Bars       
    $('#page').trigger('create');
}

$(document).ready(function() {

$('#toggleHomeFromFilter').bind('click', showhome);
$('#toggleHomeFromDraw').bind('click', showhome);

$('#toggleFilter').bind('click', function()
{
    // Show only desired NAV Bar
    $('#home').hide();
    $('#filter').show();
    $('#draw').hide();
    // Refresh the NAV Bars       
    $('#page').trigger('create');
});

$('#toggleThreshold').bind('click', function()
{
    // Show only desired NAV Bar
    $('#home').hide();
    $('#threshold').show();
    $('#filter').hide();
    $('#draw').hide();
    // Refresh the NAV Bars       
    $('#page').trigger('create');
    
    var filterUI = new dwv.gui.Threshold2();
    filterUI.display();
});

$('#toggleDraw').bind('click', function()
{
    // Show only desired NAV Bar
    $('#home').hide();
    $('#filter').hide();
    $('#draw').show();
    // Refresh the NAV Bars       
    $('#page').trigger('create');
});

});
</script>

</head>

<body>

<div data-role="page" id="main">

<div data-role="header">
<h1>DICOM Web Viewer</h1>
</div><!-- /header -->

<div data-role="content">   

<div class="ui-grid-a">
<!-- Open file -->
<div id="openFile" class="ui-block-a" title="Open File">
<form>
Path: <input type="file" id="files" name="files[]" multiple />
</form>
</div>

<div class="ui-block-b" style="text-align:right">
<select name="flip-1" id="flip-1" data-role="slider" data-mini="true" onchange="toggleInfo()">
    <option value="on">On</option>
    <option value="off">Off</option>
</select>
</div>

</div><!-- /grid-a -->

<!-- Layer Container -->
<div id="centerDiv">
<div id="layerContainer" title="Image">
<canvas id="imageLayer" style="display:none;"></canvas>
<canvas id="drawLayer" style="display:none;"></canvas>
<canvas id="infoLayer" style="display:none;"></canvas>
<canvas id="tempLayer" style="display:none;"></canvas>
<div id="plot" style="width:100px;height:70px"></div>
</div>
</div>

<!-- Toolbox -->
<div id="toolbox" title="Toolbox" style="display:none;">
</div>

<!-- History -->
<div id="history" title="History" style="display:none;"></div>


</div><!-- /content -->

<div data-role="footer">        
    <div data-role="navbar" id="home">
        <ul>
            <li><a href="#" id="toggleFilter">Display</a></li>
            <li><a href="#" id="toggleDraw">Draw</a></li>
            <li><a href="#" id="toggleFilter">Filter</a></li>
            <li><a href="#tags_page" data-transition="slide">Tags</a></li>
        </ul>
    </div><!-- /navbar: main -->
    <div data-role="navbar" id="filter" style="display:none;">
        <ul>
            <li><a href="#" id="toggleHomeFromFilter">Home</a></li>
            <li><a href="#" id="toggleThreshold">Threshold</a></li>
            <li><a href="#">Sharpen</a></li>
            <li><a href="#">Sobel</a></li>
        </ul>
    </div><!-- /navbar: filter -->
    <div data-role="navbar" id="threshold" style="display:none;">
        <ul>
            <li><div id="filterDiv">
            <input type="range" name="threshold-slider" id="threshold-slider" value="25" min="0" max="100" data-mini="true" />
            </div></li>
            <li><a href="#">Apply</a></li>
            <li><a href="#">Cancel</a></li>
        </ul>
    </div><!-- /navbar: threshold -->
    <div data-role="navbar" id="draw" style="display:none;">
        <ul>
            <li><a href="#" id="toggleHomeFromDraw">Home</a></li>
            <li>
            <select name="select-choice-0" id="select-choice-0" data-mini="true">
            <option value="standard">Rectangle</option>
            <option value="rush">Circle</option>
            <option value="express">ROI</option>
            <option value="overnight">Line</option>
            </select>
            </li>
            <li>
            <select name="select-choice-1" id="select-choice-1" data-mini="true">
            <option value="standard">Blue</option>
            <option value="rush">Red</option>
            </select>
            </li>
        </ul>
    </div><!-- /navbar: draw -->
</div><!-- /footer -->

</div><!-- /page -->


<div data-role="page" id="tags_page">

<div data-role="header">
<a href="#main" data-icon="back" 
data-transition="slide" data-direction="reverse">Back</a>
<h1>DICOM Tags</h1>
</div><!-- /header -->

<div data-role="content">   
<!-- Tags -->
<div id="tags" title="Tags"></div>
</div><!-- /content -->

</div><!-- /page -->


<script type="text/javascript">
// main application
var app = new dwv.App();
// initialise the application
app.init();

window.onresize = app.alignLayers;
</script>

</body>
</html>