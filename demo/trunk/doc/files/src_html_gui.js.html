<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src/html/gui.js - dwv</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="dwv"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.4.0beta</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/Data reader.html">Data reader</a></li>
            
                <li><a href="../classes/DICOM tag dictionary..html">DICOM tag dictionary.</a></li>
            
                <li><a href="../classes/DicomParser class..html">DicomParser class.</a></li>
            
                <li><a href="../classes/dwv.math.Circle.html">dwv.math.Circle</a></li>
            
                <li><a href="../classes/dwv.math.Draw circle command..html">dwv.math.Draw circle command.</a></li>
            
                <li><a href="../classes/dwv.math.Drawing tool..html">dwv.math.Drawing tool.</a></li>
            
                <li><a href="../classes/dwv.math.FastPoint2D.html">dwv.math.FastPoint2D</a></li>
            
                <li><a href="../classes/dwv.math.Line shape..html">dwv.math.Line shape.</a></li>
            
                <li><a href="../classes/dwv.math.Path shape..html">dwv.math.Path shape.</a></li>
            
                <li><a href="../classes/dwv.math.Point2D.html">dwv.math.Point2D</a></li>
            
                <li><a href="../classes/dwv.math.Rectangle shape..html">dwv.math.Rectangle shape.</a></li>
            
                <li><a href="../classes/dwv.math.Region Of Interest shape.
Note: should be a closed path..html">dwv.math.Region Of Interest shape.
Note: should be a closed path.</a></li>
            
                <li><a href="../classes/Filter classes..App
Main application..html">Filter classes..App
Main application.</a></li>
            
                <li><a href="../classes/Filter classes..Draw line command..html">Filter classes..Draw line command.</a></li>
            
                <li><a href="../classes/Filter classes..Draw livewire command..html">Filter classes..Draw livewire command.</a></li>
            
                <li><a href="../classes/Filter classes..Draw rectangle command..html">Filter classes..Draw rectangle command.</a></li>
            
                <li><a href="../classes/Filter classes..Draw ROI command..html">Filter classes..Draw ROI command.</a></li>
            
                <li><a href="../classes/Filter classes..Filter tool..html">Filter classes..Filter tool.</a></li>
            
                <li><a href="../classes/Filter classes..Livewire painting tool..html">Filter classes..Livewire painting tool.</a></li>
            
                <li><a href="../classes/Filter classes..Run filter command..html">Filter classes..Run filter command.</a></li>
            
                <li><a href="../classes/Filter classes..Sharpen filter tool..html">Filter classes..Sharpen filter tool.</a></li>
            
                <li><a href="../classes/Filter classes..Sobel filter tool..html">Filter classes..Sobel filter tool.</a></li>
            
                <li><a href="../classes/Filter classes..Threshold filter tool..html">Filter classes..Threshold filter tool.</a></li>
            
                <li><a href="../classes/Filter classes..Tool box..html">Filter classes..Tool box.</a></li>
            
                <li><a href="../classes/Filter classes..UndoStack class..html">Filter classes..UndoStack class.</a></li>
            
                <li><a href="../classes/Filter classes..WindowLevel tool: handle window/level related events..html">Filter classes..WindowLevel tool: handle window/level related events.</a></li>
            
                <li><a href="../classes/Filter classes..Zoom class..html">Filter classes..Zoom class.</a></li>
            
                <li><a href="../classes/GUI classes..Circular Bucket Queue.

Returns input&#x27;d points in sorted order. All operations run in roughly O(1)
time (for input with small cost values), but it has a strict requirement:

If the most recent point had a cost of c, any points added should have a cost
c&#x27; in the range c &lt;= c&#x27; &lt;= c + (capacity - 1)..html">GUI classes..Circular Bucket Queue.

Returns input&#x27;d points in sorted order. All operations run in roughly O(1)
time (for input with small cost values), but it has a strict requirement:

If the most recent point had a cost of c, any points added should have a cost
c&#x27; in the range c &lt;= c&#x27; &lt;= c + (capacity - 1).</a></li>
            
                <li><a href="../classes/GUI classes..Image class..html">GUI classes..Image class.</a></li>
            
                <li><a href="../classes/GUI classes..Image Size class. 
Supports 2D and 3D images..html">GUI classes..Image Size class. 
Supports 2D and 3D images.</a></li>
            
                <li><a href="../classes/GUI classes..Image Spacing class. 
Supports 2D and 3D images..html">GUI classes..Image Spacing class. 
Supports 2D and 3D images.</a></li>
            
                <li><a href="../classes/GUI classes..Rescale LUT class..html">GUI classes..Rescale LUT class.</a></li>
            
                <li><a href="../classes/GUI classes..Scissors.

Ref: Eric N. Mortensen, William A. Barrett, Interactive Segmentation with
  Intelligent Scissors, Graphical Models and Image Processing, Volume 60,
  Issue 5, September 1998, Pages 349-384, ISSN 1077-3169,
  DOI: 10.1006/gmip.1998.0480.

(http://www.sciencedirect.com/science/article/B6WG4-45JB8WN-9/2/6fe59d8089fd1892c2bfb82283065579)

Highly inspired from http://code.google.com/p/livewire-javascript/.html">GUI classes..Scissors.

Ref: Eric N. Mortensen, William A. Barrett, Interactive Segmentation with
  Intelligent Scissors, Graphical Models and Image Processing, Volume 60,
  Issue 5, September 1998, Pages 349-384, ISSN 1077-3169,
  DOI: 10.1006/gmip.1998.0480.

(http://www.sciencedirect.com/science/article/B6WG4-45JB8WN-9/2/6fe59d8089fd1892c2bfb82283065579)

Highly inspired from http://code.google.com/p/livewire-javascript/</a></li>
            
                <li><a href="../classes/GUI classes..Style class..html">GUI classes..Style class.</a></li>
            
                <li><a href="../classes/GUI classes..View class..html">GUI classes..View class.</a></li>
            
                <li><a href="../classes/GUI classes..Window layer..html">GUI classes..Window layer.</a></li>
            
                <li><a href="../classes/GUI classes..Window LUT class..html">GUI classes..Window LUT class.</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/dwv.html">dwv</a></li>
            
                <li><a href="../modules/math.html">math</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src/html/gui.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
//! @namespace Main DWV namespace.
var dwv = dwv || {};
//! @namespace GUI classes.
dwv.gui = dwv.gui || {};

dwv.gui.onChangeWindowLevelPreset = function(event)
{
    app.getToolBox().getSelectedTool().setPreset(this.value);
};

dwv.gui.onChangeColourMap = function(event)
{
    app.getToolBox().getSelectedTool().setColourMap(this.value);
};

dwv.gui.onChangeTool = function(event)
{
    app.getToolBox().setSelectedTool(this.value);
};

dwv.gui.onChangeFilter = function(event)
{
    app.getToolBox().getSelectedTool().setSelectedFilter(this.value);
};

dwv.gui.onChangeShape = function(event)
{
    app.getToolBox().getSelectedTool().setShapeName(this.value);
};

dwv.gui.onChangeLineColour = function(event)
{
    app.getToolBox().getSelectedTool().setLineColour(this.value);
};

dwv.gui.appendToolboxHtml = function()
{
    // select
    var toolSelector = dwv.html.createHtmlSelect(&quot;toolSelect&quot;,dwv.tool.tools);
    toolSelector.onchange = dwv.gui.onChangeTool;
    // label
    var toolLabel = document.createElement(&quot;label&quot;);
    toolLabel.setAttribute(&quot;for&quot;, &quot;toolSelect&quot;);
    toolLabel.appendChild(document.createTextNode(&quot;Tool: &quot;));
    // list element
    var toolLi = document.createElement(&quot;li&quot;);
    toolLi.id = &quot;toolLi&quot;;
    //toolLi.appendChild(toolLabel);
    toolLi.appendChild(toolSelector);
    toolLi.setAttribute(&quot;class&quot;,&quot;ui-block-a&quot;);

    // node
    var node = document.getElementById(&quot;toolList&quot;);
    // clear it
    while(node.hasChildNodes()) node.removeChild(node.firstChild);
    // append
    node.appendChild(toolLi);
    // trigger create event (mobile)
    $(&quot;#toolList&quot;).trigger(&quot;create&quot;);
};

dwv.gui.appendWindowLevelHtml = function()
{
    // preset selector
    var wlSelector = dwv.html.createHtmlSelect(&quot;presetSelect&quot;,dwv.tool.presets);
    wlSelector.onchange = dwv.gui.onChangeWindowLevelPreset;
    // preset label
    var wlLabel = document.createElement(&quot;label&quot;);
    wlLabel.setAttribute(&quot;for&quot;, &quot;presetSelect&quot;);
    wlLabel.appendChild(document.createTextNode(&quot;WL Preset: &quot;));
    // colour map selector
    var cmSelector = dwv.html.createHtmlSelect(&quot;colourMapSelect&quot;,dwv.tool.colourMaps);
    // special monochrome1 case
    if( app.getImage().getPhotometricInterpretation() === &quot;MONOCHROME1&quot; )
        cmSelector.options[1].defaultSelected = true;
    cmSelector.onchange = dwv.gui.onChangeColourMap;
    // colour map label
    var cmLabel = document.createElement(&quot;label&quot;);
    cmLabel.setAttribute(&quot;for&quot;, &quot;colourMapSelect&quot;);
    cmLabel.appendChild(document.createTextNode(&quot;Colour Map: &quot;));

    // preset list element
    var wlLi = document.createElement(&quot;li&quot;);
    wlLi.id = &quot;wlLi&quot;;
    //wlLi.appendChild(wlLabel);
    wlLi.appendChild(wlSelector);
    wlLi.setAttribute(&quot;class&quot;,&quot;ui-block-b&quot;);
    // color map list element
    var cmLi = document.createElement(&quot;li&quot;);
    cmLi.id = &quot;cmLi&quot;;
    // cmLi.appendChild(cmLabel);
    cmLi.appendChild(cmSelector);
    cmLi.setAttribute(&quot;class&quot;,&quot;ui-block-c&quot;);

    // node
    var node = document.getElementById(&quot;toolList&quot;);
    // apend preset
    node.appendChild(wlLi);
    // apend color map
    node.appendChild(cmLi);
    // trigger create event (mobile)
    $(&quot;#toolList&quot;).trigger(&quot;create&quot;);
};

dwv.gui.clearWindowLevelHtml = function()
{
    dwv.html.removeNode(&quot;wlLi&quot;);
    dwv.html.removeNode(&quot;cmLi&quot;);
};

dwv.gui.appendDrawHtml = function()
{
    // shape select
    var shapeSelector = dwv.html.createHtmlSelect(&quot;shapeSelect&quot;,dwv.tool.shapes);
    shapeSelector.onchange = dwv.gui.onChangeShape;
    // shape label
    var shapeLabel = document.createElement(&quot;label&quot;);
    shapeLabel.setAttribute(&quot;for&quot;, &quot;shapeSelect&quot;);
    shapeLabel.appendChild(document.createTextNode(&quot;Shape: &quot;));
    // colour select
    var colourSelector = dwv.html.createHtmlSelect(&quot;colourSelect&quot;,dwv.tool.colors);
    colourSelector.onchange = dwv.gui.onChangeLineColour;
    // colour label
    var colourLabel = document.createElement(&quot;label&quot;);
    colourLabel.setAttribute(&quot;for&quot;, &quot;colourSelect&quot;);
    colourLabel.appendChild(document.createTextNode(&quot;Colour: &quot;));

    // list element
    var shapeLi = document.createElement(&quot;li&quot;);
    shapeLi.id = &quot;shapeLi&quot;;
    // shapeLi.appendChild(shapeLabel);
    shapeLi.appendChild(shapeSelector);
    shapeLi.setAttribute(&quot;class&quot;,&quot;ui-block-c&quot;);
    // list element
    var colourLi = document.createElement(&quot;li&quot;);
    colourLi.id = &quot;colourLi&quot;;
    //colourLi.appendChild(colourLabel);
    colourLi.appendChild(colourSelector);
    colourLi.setAttribute(&quot;class&quot;,&quot;ui-block-b&quot;);
    
    // node
    var node = document.getElementById(&quot;toolList&quot;);
    // apend shape
    node.appendChild(shapeLi);
    // append color
    node.appendChild(colourLi);
    // trigger create event (mobile)
    $(&quot;#toolList&quot;).trigger(&quot;create&quot;);
};

dwv.gui.clearDrawHtml = function()
{
    dwv.html.removeNode(&quot;colourLi&quot;);
    dwv.html.removeNode(&quot;shapeLi&quot;);
};

/**
 * @function Append the color chooser to the HTML document in the &#x27;colourChooser&#x27; node.
 */
dwv.gui.appendLivewireHtml = function()
{
    // select
    var colourSelector = dwv.html.createHtmlSelect(&quot;colourSelect&quot;,dwv.tool.colors);
    colourSelector.onchange = dwv.gui.onChangeLineColour;
    // label
    var colourLabel = document.createElement(&quot;label&quot;);
    colourLabel.setAttribute(&quot;for&quot;, &quot;colourSelect&quot;);
    colourLabel.appendChild(document.createTextNode(&quot;Colour: &quot;));
    
    // list element
    var colourLi = document.createElement(&quot;li&quot;);
    colourLi.id = &quot;colourLi&quot;;
    colourLi.setAttribute(&quot;class&quot;,&quot;ui-block-b&quot;);
    //colourLi.appendChild(colourLabel);
    colourLi.appendChild(colourSelector);
    
    // append to tool list
    document.getElementById(&quot;toolList&quot;).appendChild(colourLi);
    // trigger create event (mobile)
    $(&quot;#toolList&quot;).trigger(&quot;create&quot;);
};

/**
 * @function Remove the color chooser specific node.
 */
dwv.gui.clearLivewireHtml = function()
{
    dwv.html.removeNode(&quot;colourLi&quot;);
};

dwv.gui.appendFilterHtml = function()
{
    // select
    var filterSelector = dwv.html.createHtmlSelect(&quot;filterSelect&quot;,dwv.tool.filters);
    filterSelector.onchange = dwv.gui.onChangeFilter;
    // label
    var filterLabel = document.createElement(&quot;label&quot;);
    filterLabel.setAttribute(&quot;for&quot;, &quot;filterSelect&quot;);
    filterLabel.appendChild(document.createTextNode(&quot;Filter: &quot;));

    // list element
    var filterLi = document.createElement(&quot;li&quot;);
    filterLi.id = &quot;filterLi&quot;;
    filterLi.setAttribute(&quot;class&quot;,&quot;ui-block-b&quot;);
    //filterLi.appendChild(filterLabel);
    filterLi.appendChild(filterSelector);
    
    // append to tool list
    document.getElementById(&quot;toolList&quot;).appendChild(filterLi);
    // trigger create event (mobile)
    $(&quot;#toolList&quot;).trigger(&quot;create&quot;);
};

dwv.gui.clearFilterHtml = function()
{
    dwv.html.removeNode(&quot;filterLi&quot;);
};

/**
 * @namespace GUI classes.
 */
dwv.gui.filter = dwv.gui.filter || {};

/**
* @function Threshold Filter User Interface.
*/
dwv.gui.filter.appendThresholdHtml = function()
{
    // list element
    var thresholdLi = document.createElement(&quot;li&quot;);
    thresholdLi.setAttribute(&quot;class&quot;,&quot;ui-block-c&quot;);
    thresholdLi.id = &quot;thresholdLi&quot;;
    
    // append to tool list
    document.getElementById(&quot;toolList&quot;).appendChild(thresholdLi);
    // gui specific slider...
    dwv.gui.getSliderHtml();
    // trigger create event (mobile)
    $(&quot;#toolList&quot;).trigger(&quot;create&quot;);
};

dwv.gui.filter.clearThresholdHtml = function()
{
    dwv.html.removeNode(&quot;thresholdLi&quot;);
};

/**
* @function Sharpen Filter User Interface.
*/
dwv.gui.filter.appendSharpenHtml = function()
{
    // button
    var buttonRun = document.createElement(&quot;button&quot;);
    buttonRun.id = &quot;runFilterButton&quot;;
    buttonRun.onclick = app.getToolBox().getSelectedTool().getSelectedFilter().run;
    buttonRun.appendChild(document.createTextNode(&quot;Apply&quot;));

    // list element
    var sharpenLi = document.createElement(&quot;li&quot;);
    sharpenLi.id = &quot;sharpenLi&quot;;
    sharpenLi.setAttribute(&quot;class&quot;,&quot;ui-block-c&quot;);
    sharpenLi.appendChild(buttonRun);
    
    // append to tool list
    document.getElementById(&quot;toolList&quot;).appendChild(sharpenLi);
    // trigger create event (mobile)
    $(&quot;#toolList&quot;).trigger(&quot;create&quot;);
};

dwv.gui.filter.clearSharpenHtml = function()
{
    dwv.html.removeNode(&quot;sharpenLi&quot;);
};

/**
* @function Sobel Filter User Interface.
*/
dwv.gui.filter.appendSobelHtml = function()
{
    // button
    var buttonRun = document.createElement(&quot;button&quot;);
    buttonRun.id = &quot;runFilterButton&quot;;
    buttonRun.onclick = app.getToolBox().getSelectedTool().getSelectedFilter().run;
    buttonRun.appendChild(document.createTextNode(&quot;Apply&quot;));

    // list element
    var sobelLi = document.createElement(&quot;li&quot;);
    sobelLi.id = &quot;sobelLi&quot;;
    sobelLi.setAttribute(&quot;class&quot;,&quot;ui-block-c&quot;);
    sobelLi.appendChild(buttonRun);
    
    // append to tool list
    document.getElementById(&quot;toolList&quot;).appendChild(sobelLi);
    // trigger create event (mobile)
    $(&quot;#toolList&quot;).trigger(&quot;create&quot;);
};

dwv.gui.filter.clearSobelHtml = function()
{
    dwv.html.removeNode(&quot;sobelLi&quot;);
};

dwv.gui.appendZoomHtml = function()
{
    // button
    var button = document.createElement(&quot;button&quot;);
    button.id = &quot;zoomResetButton&quot;;
    button.name = &quot;zoomResetButton&quot;;
    button.onclick = dwv.tool.zoomReset;
    var text = document.createTextNode(&quot;Reset&quot;);
    button.appendChild(text);
    
    // list element
    var zoomLi = document.createElement(&quot;li&quot;);
    zoomLi.id = &quot;zoomLi&quot;;
    zoomLi.setAttribute(&quot;class&quot;,&quot;ui-block-c&quot;);
    zoomLi.appendChild(button);
    
    // append to tool list
    document.getElementById(&quot;toolList&quot;).appendChild(zoomLi);
    // trigger create event (mobile)
    $(&quot;#toolList&quot;).trigger(&quot;create&quot;);
};

dwv.gui.clearZoomHtml = function()
{
    dwv.html.removeNode(&quot;zoomLi&quot;);
};

dwv.gui.appendUndoHtml = function()
{
    var paragraph = document.createElement(&quot;p&quot;);  
    paragraph.appendChild(document.createTextNode(&quot;History:&quot;));
    paragraph.appendChild(document.createElement(&quot;br&quot;));
    
    var select = document.createElement(&quot;select&quot;);
    select.id = &quot;history_list&quot;;
    select.name = &quot;history_list&quot;;
    select.multiple = &quot;multiple&quot;;
    paragraph.appendChild(select);

    // node
    var node = document.getElementById(&quot;history&quot;);
    // clear it
    while(node.hasChildNodes()) node.removeChild(node.firstChild);
    // append
    node.appendChild(paragraph);
};

dwv.gui.addCommandToUndoHtml = function(commandName)
{
    var select = document.getElementById(&quot;history_list&quot;);
    // remove undone commands
    var count = select.length - (select.selectedIndex+1);
    if( count &gt; 0 )
    {
        for( var i = 0; i &lt; count; ++i)
        {
            select.remove(select.length-1);
        }
    }
    // add new option
    var option = document.createElement(&quot;option&quot;);
    option.text = commandName;
    option.value = commandName;
    select.add(option);
    // increment selected index
    select.selectedIndex++;
};

dwv.gui.enableInUndoHtml = function(enable)
{
    var select = document.getElementById(&quot;history_list&quot;);
    // enable or not (order is important)
    var option;
    if( enable ) 
    {
        // increment selected index
        select.selectedIndex++;
        // enable option
        option = select.options[select.selectedIndex];
        option.disabled = false;
    }
    else 
    {
        // disable option
        option = select.options[select.selectedIndex];
        option.disabled = true;
        // decrement selected index
        select.selectedIndex--;
    }
};


    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
